---
layout: default
---

<style scoped>
.slidev-vclick-hidden {
  display: none;
}

.small-code {
  .slidev-code {
    font-size: 0.6rem !important;
    line-height: 0rem !important;
    width: 300px !important;
  }
}
</style>

<section-title title="AST を生成する流れ" />

<div class="_bullet" v-click="[0]">

```mermaid
flowchart LR

ソースコード --字句解析--> トークン --構文解析--> AST

classDef hover fill:#b8b8f5,color:#eeeee,stroke:#9370DB
class トークン hover
class AST hover
```

* 構文解析: 字句解析で得られたトークンを並び方やそれぞれの意味で分析し、ASTを生成

<v-drag-arrow pos="394,397,127,1"/>

<div class="mt-5 flex justify-around">

```json{*}
{
  "kLet": let,
  "kIdentifier": count,
  "kAssign": =,
  "kNumber": 10,
  "kSemicolon": ;
}
```

<div class="small-code">

```json{*}
{
  "type": "Program",
  "body": [
    {
      "type": "VariableDeclaration",
      "kind": "let",
      "declarations": [
        {
          "type": "VariableDeclarator",
          "id": {
            "type": "Identifier",
            "name": "count"
          },
          "init": {
            "type": "Literal",
            "value": 10,
            "raw": "10"
          }
        }
      ],
    }
  ]
}
```

</div>

</div>

</div>

<div class="_bullet" v-click="1">

```mermaid
flowchart LR

ソースコード --字句解析--> トークン --構文解析--> AST
```

- ESLint では `espree` で JavaScript コードを AST に変換している
  - espree: https://github.com/eslint/js/tree/main/packages/espree

</div>

<!-- 
字句解析によって生成されたトークンは、構文解析器によって解析され、トークンの意味だったり、並び方を見て、階層構造を構築し、AST が生成されます。  
ここで生成される AST では、スペースの数などといった、表面的な表現の違いが吸収され、コードの本質的な意味や構造だけを抽出して表現されます。  
AST とは Abstract Syntax Tree の略ですが、この Abstract, つまり抽象とは、スペースの数などといった表面的な表現の違いに左右されないことを意味します

[click] ちなみに、ESLint では、ソースコードから AST を生成する処理を `espree`という parser を使用して行っています。  
-->
