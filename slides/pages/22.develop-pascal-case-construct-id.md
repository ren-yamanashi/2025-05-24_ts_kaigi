---
layout: default
---

<style scoped>
.slidev-vclick-hidden {
  display: none;
}
.small-code {
  margin-top: 10px;
  font-size: 10px !important;
  display: flex;
  justify-content: space-between;
  .slidev-code {
    font-size: 0.55rem !important;
    line-height: 1rem !important;
    width: 95% !important;
    height: 1000px
  }
}
</style>

<div class="_bullet" v-click=[0]>

```ts
import { ESLintUtils } from "@typescript-eslint/utils";

export const pascalCaseConstructId = ESLintUtils.RuleCreator.withoutDocs({
  // ...
  create(context) {
    const parserServices = ESLintUtils.getParserServices(context);
    const typeChecker = parserServices.program.getTypeChecker();
    return {
      NewExpression(node) {
        // インスタンス化したクラスの型情報
        const nodeType = typeChecker.getTypeAtLocation(node);
      },
    };
  },
});
```

</div>

<div class="_bullet" v-click=[0]>

- [`getTypeAtLocation`](https://github.com/microsoft/TypeScript/blob/v5.8.2/src/compiler/types.ts#L5160)という typescript の関数を使用
  - `Node` を受け取ると `Type` を返す関数

</div>

<div v-click=[1]>

#### `Type`の情報

<div class="small-code">

<div>

- https://github.com/microsoft/TypeScript/blob/v5.8.3/src/services/types.ts#L109-L136

```ts
export interface Type {
  getFlags(): TypeFlags;
  getSymbol(): Symbol | undefined;
  getProperties(): Symbol[];
  getProperty(propertyName: string): Symbol | undefined;
  getApparentProperties(): Symbol[];
  getCallSignatures(): readonly Signature[];
  getConstructSignatures(): readonly Signature[];
  getStringIndexType(): Type | undefined;
  getNumberIndexType(): Type | undefined;
  getBaseTypes(): BaseType[] | undefined;
  getNonNullableType(): Type;
  /** @internal */ getNonOptionalType(): Type;
  /** @internal */ isNullableType(): boolean;
  getConstraint(): Type | undefined;
  getDefault(): Type | undefined;
  isUnion(): this is UnionType;
  isIntersection(): this is IntersectionType;
  isUnionOrIntersection(): this is UnionOrIntersectionType;
  isLiteral(): this is LiteralType;
  isStringLiteral(): this is StringLiteralType;
  isNumberLiteral(): this is NumberLiteralType;
  isTypeParameter(): this is TypeParameter;
  isClassOrInterface(): this is InterfaceType;
  isClass(): this is InterfaceType;
  isIndexType(): this is IndexType;
}

```

</div>

<div>

- https://github.com/microsoft/TypeScript/blob/v5.8.3/src/compiler/types.ts#L6377-L6393

```ts
export interface Type {
  flags: TypeFlags;
  /** @internal */ id: TypeId;
  /** @internal */ checker: TypeChecker;
  symbol: Symbol;
  pattern?: DestructuringPattern;
  aliasSymbol?: Symbol;
  aliasTypeArguments?: readonly Type[];
  /** @internal */
  permissiveInstantiation?: Type;
  /** @internal */
  restrictiveInstantiation?: Type;
  /** @internal */
  immediateBaseConstraint?: Type;
  /** @internal */
  widened?: Type;
}
```

</div>

</div>

</div>
