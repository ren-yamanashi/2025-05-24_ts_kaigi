---
layout: default
transition: none
---

<style scoped>
.slidev-vclick-hidden {
  display: none;
}
.small-code {
  .slidev-code {
    font-size: 0.92rem !important;
    line-height: 0rem !important;
    width: 400px !important;
  }
}
</style>

<div class="_bullet">

2. それぞれのケースのコードの AST を見ながら、ルールを実装する

</div>

<div class="flex justify-around small-code" v-click="[0]">

```json{*}
// ✅ 正常としたいコードのAST
{
  "type": "Program",
  "body": [{
    "type": "IfStatement",
    "test": {
      "type": "Literal",
      "value": true,
      "raw": "true"
    },
    "consequent": {
      "type": "BlockStatement",
      "body": [{
        "type": "ExpressionStatement",
        "expression": {
          // ...
        }
      }]
    }
  }]
}
```

<div>

```json{*}
// ❌ 異常としたいコードのAST
{
  "type": "Program",
  "body": [
    {
      "type": "IfStatement",
      "test": {
        "type": "Literal",
        "value": true,
        "raw": "true"
      },
      "consequent": {
        "type": "ExpressionStatement",
        "expression": {
          // ...
        }
      }
    }
  ]
}
```

</div>

</div>

<div class="flex justify-around small-code" v-click="[1]">

```json{5,11,12}
// ✅ 正常系
{
  "type": "Program",
  "body": [{
    "type": "IfStatement",
    "test": {
      "type": "Literal",
      "value": true,
      "raw": "true"
    },
    "consequent": {
      "type": "BlockStatement",
      "body": [{
        "type": "ExpressionStatement",
        "expression": {
          // ...
        }
      }]
    }
  }]
}
```

<div>

```json{6,12,13}
// ❌ 異常系
{
  "type": "Program",
  "body": [
    {
      "type": "IfStatement",
      "test": {
        "type": "Literal",
        "value": true,
        "raw": "true"
      },
      "consequent": {
        "type": "ExpressionStatement",
        "expression": {
          // ...
        }
      }
    }
  ]
}
```

</div>

</div>

<div class="_bullet" v-click="2">

* ルール定義: `if` 文の結果定義のノードが BlockStatement でない場合はエラーにする

</div>

<div v-click="3">

```ts{*|*|5-15|7-14|8-13|*}
import { Rule } from "eslint";

export const requireIfBlock: Rule.RuleModule = {
  meta: { /** ... */ },
  create(context) {
    return {
      IfStatement(node) {
        if (node.consequent.type !== "BlockStatement") {
          context.report({
            node,
            messageId: "requireIfBlock",
          });
        }
      },
    };
  },
};
```

</div>
