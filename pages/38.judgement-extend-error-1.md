---
layout: default
transition: none
---

<style scoped>
.slidev-vclick-hidden {
  display: none;
}
.small-code {
  .slidev-code {
    font-size: 0.63rem !important;
    line-height: 0rem !important;
    width: 400px !important;
  }
}
</style>

<div class="_bullet">

3. 取得した型情報と AST を元にチェック

- 再起的に <span v-mark="{at: 1, color: 'red', type: 'circle'}"> 親の型情報 </span> を取得し、`Error`クラスを継承しているかを判定する

</div>

<div v-click="1" class="_bullet">

- `getTypeAtLocation` で取得した型情報(`ts.Type`)を使用

```ts
// ref: https://github.com/microsoft/TypeScript/blob/v5.8.3/src/compiler/types.ts#L5160
export interface TypeChecker {
  // ...
  getTypeAtLocation(node: Node): Type;
}
```

</div>

<!-- 
続いて、型情報を辿って、定義されたクラスが`Error`を継承しているかを判定する実装を行います。

今回のルール実装では、自身の型情報のみではなく、クラスの継承元の型情報も必要となるため、再起的に親の型情報を取得し、`Error`クラスを継承しているかを判定する実装を行います。  

[click] この「親の型情報を取得する」ことを実現するためには、先ほどの`getTypeAtLocation`で取得した型情報つまり、`typescript`の`Type interface を使用します。  

[click] この`Type`という `interface`には、さまざまなプロパティがあるのですが、

[click] その中の`getBaseTypes`というメソッドを使用することで、親の型情報を取得することができます。
-->